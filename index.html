<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratório de Conservação de Energia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutral Harmony -->
    <!-- Application Structure Plan: A single-page, vertically scrolling application divided into three thematic sections. 1) 'Conceitos Fundamentais' introduces the types of energy. 2) 'Laboratório Interativo' provides hands-on simulations (projectile and pendulum) with real-time charts and user-controlled variables (mass, velocity, friction) to visualize energy transformation in conservative and dissipative systems. 3) 'Resolva os Desafios' turns the PDF exercises into interactive calculators. This structure was chosen to guide the user from theoretical knowledge to practical, interactive application, enhancing understanding and engagement more effectively than a linear report. -->
    <!-- Visualization & Content Choices: Report Info -> Projectile motion & energy transformation. Goal -> Allow users to see energy change dynamically. Viz -> HTML/CSS animation paired with a Chart.js bar chart. Interaction -> Sliders for mass and velocity update the simulation. Justification -> Visualizing the inverse relationship between kinetic and potential energy is more intuitive than reading about it. Report Info -> Pendulum with friction. Goal -> Demonstrate energy loss in dissipative systems. Viz -> Pendulum animation and a Chart.js chart showing mechanical energy decreasing while dissipated energy increases. Interaction -> Friction slider. Justification -> Clearly illustrates the difference between conservative and dissipative systems. Report Info -> End-of-chapter exercises. Goal -> Reinforce formula application. Viz -> Interactive calculator 'cards'. Interaction -> User inputs values, clicks 'calculate' to see the result. Justification -> Active problem-solving is better for learning than passive reading. All charts use Chart.js on Canvas. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F5;
            color: #2c3e50;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 250px;
            max-height: 300px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 300px;
                max-height: 350px;
            }
        }
        .slider-thumb::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #3498db;
            cursor: pointer;
            border-radius: 50%;
        }
        .slider-thumb::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #3498db;
            cursor: pointer;
            border-radius: 50%;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white shadow-md py-6">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-4xl font-bold text-[#2c3e50]">Laboratório de Conservação de Energia</h1>
            <p class="mt-2 text-lg text-gray-600">Inspirado na lei de Lavoisier: "Nada se perde, tudo se transforma."</p>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">
        
        <section id="conceitos" class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-8">Conceitos Fundamentais</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold mb-3 text-[#2c3e50]">⚡ Energia Cinética</h3>
                    <p class="text-gray-700">A energia associada ao **movimento**. Quanto maior a massa ou a velocidade de um corpo, maior sua energia cinética.</p>
                    <p class="mt-4 text-center font-mono bg-gray-100 p-2 rounded-md">E_c = ½ mv²</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold mb-3 text-[#2c3e50]">⛰️ Energia Potencial</h3>
                    <p class="text-gray-700">A energia armazenada devido à **posição** ou altura de um corpo. Quanto mais alto, maior sua capacidade de realizar trabalho.</p>
                    <p class="mt-4 text-center font-mono bg-gray-100 p-2 rounded-md">E_p = mgh</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg md:col-span-2 lg:col-span-1">
                    <h3 class="text-2xl font-bold mb-3 text-[#2c3e50]">⚙️ Energia Mecânica</h3>
                    <p class="text-gray-700">É a **soma** da energia cinética e da energia potencial. Em sistemas ideais, essa energia total se conserva.</p>
                    <p class="mt-4 text-center font-mono bg-gray-100 p-2 rounded-md">E_m = E_c + E_p</p>
                </div>
            </div>
        </section>

        <section id="laboratorio" class="mb-16 bg-white p-8 rounded-xl shadow-2xl">
            <h2 class="text-3xl font-bold text-center mb-2">Laboratório Interativo</h2>
            <p class="text-center text-gray-600 mb-8">Veja a transformação de energia acontecer. Ajuste os controles e observe o resultado em tempo real.</p>
            
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div>
                    <h3 class="text-2xl font-bold mb-4 text-center">Simulação 1: O Projétil (Sistema Conservativo)</h3>
                    <div class="relative w-full h-80 bg-gray-100 rounded-lg overflow-hidden border">
                        <div id="projectile" class="absolute bottom-0 left-1/2 w-8 h-8 bg-[#3498db] rounded-full -ml-4"></div>
                    </div>
                    <div class="mt-4 grid grid-cols-2 gap-4">
                        <div>
                            <label for="projMass" class="block text-sm font-medium text-gray-700">Massa (kg)</label>
                            <input type="range" id="projMass" min="0.01" max="2" step="0.01" value="0.5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb">
                            <span id="projMassValue" class="text-center block font-mono">0.5 kg</span>
                        </div>
                        <div>
                            <label for="projVel" class="block text-sm font-medium text-gray-700">Velocidade Inicial (m/s)</label>
                            <input type="range" id="projVel" min="10" max="100" step="1" value="50" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb">
                            <span id="projVelValue" class="text-center block font-mono">50 m/s</span>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="chart-container">
                        <canvas id="projectileChart"></canvas>
                    </div>
                     <div class="text-center mt-4 p-4 bg-gray-50 rounded-lg">
                        <p><strong>Energia Mecânica Total:</strong> <span id="projTotalEnergy" class="font-mono">0</span> J</p>
                        <p><strong>Altura Máxima Atingida:</strong> <span id="projMaxHeight" class="font-mono">0</span> m</p>
                    </div>
                </div>
            </div>

            <hr class="my-12">

            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div>
                     <h3 class="text-2xl font-bold mb-4 text-center">Simulação 2: O Pêndulo (Sistema Dissipativo)</h3>
                    <div class="relative w-full h-80 bg-gray-100 rounded-lg overflow-hidden border">
                         <div id="pendulum-pivot" class="absolute top-0 left-1/2 w-2 h-2 bg-black -ml-1"></div>
                         <div id="pendulum-arm" class="absolute top-0 left-1/2 w-0.5 h-40 bg-gray-700" style="transform-origin: top center;"></div>
                         <div id="pendulum-bob" class="absolute w-10 h-10 bg-[#e74c3c] rounded-full"></div>
                    </div>
                     <div class="mt-4">
                        <label for="pendulumFriction" class="block text-sm font-medium text-gray-700">Atrito</label>
                        <input type="range" id="pendulumFriction" min="0" max="0.05" step="0.001" value="0.005" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb">
                        <span id="pendulumFrictionValue" class="text-center block font-mono">Baixo</span>
                    </div>
                </div>
                <div>
                    <div class="chart-container">
                        <canvas id="pendulumChart"></canvas>
                    </div>
                    <div class="text-center mt-4 p-4 bg-gray-50 rounded-lg">
                        <p><strong>Energia Mecânica Restante:</strong> <span id="pendulumCurrentEnergy" class="font-mono">0</span> J</p>
                    </div>
                </div>
            </div>

        </section>
        
        <section id="desafios">
            <h2 class="text-3xl font-bold text-center mb-8">Resolva os Desafios</h2>
            <div class="grid md:grid-cols-2 gap-8">

                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold mb-3">🎢 Desafio 1: Barco Viking</h3>
                    <p class="mb-4 text-gray-600">Considerando o atrito desprezível, qual a velocidade do barco ao passar pelo ponto mais baixo, partindo de uma altura de 20m?</p>
                    <button id="calcVik" class="w-full bg-[#3498db] text-white py-2 rounded-lg hover:bg-[#2980b9] transition-colors">Calcular Velocidade</button>
                    <p id="resVik" class="mt-4 text-center font-bold text-lg h-8"></p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold mb-3">🧱 Desafio 2: O Pedreiro</h3>
                    <p class="mb-4 text-gray-600">Qual a menor velocidade para lançar um tijolo a 3m de altura, para que ele chegue com velocidade zero?</p>
                    <button id="calcPed" class="w-full bg-[#3498db] text-white py-2 rounded-lg hover:bg-[#2980b9] transition-colors">Calcular Velocidade Mínima</button>
                    <p id="resPed" class="mt-4 text-center font-bold text-lg h-8"></p>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold mb-3">💪 Desafio 3: O Lutador</h3>
                    <p class="mb-4 text-gray-600">Um lutador de 100kg se joga nas cordas a 5 m/s. Qual a energia potencial elástica armazenada na corda quando ele para?</p>
                    <button id="calcLut" class="w-full bg-[#3498db] text-white py-2 rounded-lg hover:bg-[#2980b9] transition-colors">Calcular Energia Armazenada</button>
                    <p id="resLut" class="mt-4 text-center font-bold text-lg h-8"></p>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold mb-3">👧 Desafio 4: O Escorregador</h3>
                    <p class="mb-4 text-gray-600">Uma criança de 50kg desce de um escorregador de 2m de altura. Se 600 Joules são perdidos pelo atrito, qual sua velocidade final?</p>
                    <button id="calcEsc" class="w-full bg-[#3498db] text-white py-2 rounded-lg hover:bg-[#2980b9] transition-colors">Calcular Velocidade Final</button>
                    <p id="resEsc" class="mt-4 text-center font-bold text-lg h-8"></p>
                </div>
            </div>
        </section>
    </main>
    
    <footer class="bg-white mt-16 py-6 border-t">
        <div class="container mx-auto px-6 text-center text-gray-500">
            <p>Compreender a conservação e a dissipação de energia é fundamental para um mundo mais eficiente.</p>
        </div>
    </footer>

    <script>
        const g = 9.81;

        const setupProjectile = () => {
            const massSlider = document.getElementById('projMass');
            const velSlider = document.getElementById('projVel');
            const massValue = document.getElementById('projMassValue');
            const velValue = document.getElementById('projVelValue');
            const projectileEl = document.getElementById('projectile');
            const totalEnergyEl = document.getElementById('projTotalEnergy');
            const maxHeightEl = document.getElementById('projMaxHeight');
            const canvas = document.getElementById('projectileChart');
            const ctx = canvas.getContext('2d');

            let chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Energia'],
                    datasets: [
                        { label: 'Cinética', data: [0], backgroundColor: '#3498db', borderWidth: 1 },
                        { label: 'Potencial', data: [0], backgroundColor: '#27ae60', borderWidth: 1 }
                    ]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { stacked: true, title: { display: true, text: 'Joules (J)' } },
                        y: { stacked: true, display: false }
                    },
                    plugins: {
                        legend: { position: 'top' },
                        tooltip: { enabled: false }
                    }
                }
            });

            let animationFrameId;
            let state = { mass: 0.5, v0: 50, t: 0, y: 0, v: 50, totalEnergy: 0, maxHeight: 0 };

            function updateValues() {
                state.mass = parseFloat(massSlider.value);
                state.v0 = parseFloat(velSlider.value);
                massValue.textContent = `${state.mass.toFixed(2)} kg`;
                velValue.textContent = `${state.v0.toFixed(0)} m/s`;
                resetAnimation();
            }

            function resetAnimation() {
                if (animationFrameId) cancelAnimationFrame(animationFrameId);
                state.t = 0;
                state.totalEnergy = 0.5 * state.mass * state.v0 * state.v0;
                state.maxHeight = (state.v0 * state.v0) / (2 * g);
                totalEnergyEl.textContent = state.totalEnergy.toFixed(2);
                maxHeightEl.textContent = state.maxHeight.toFixed(2);
                animate();
            }

            function animate() {
                state.t += 0.016;
                state.y = state.v0 * state.t - 0.5 * g * state.t * state.t;
                state.v = state.v0 - g * state.t;

                if (state.y < 0) {
                    state.t = 0;
                }

                const containerHeight = projectileEl.parentElement.clientHeight;
                const projHeight = projectileEl.clientHeight;
                const pixelY = (state.y / state.maxHeight) * (containerHeight - projHeight);
                projectileEl.style.bottom = `${Math.max(0, pixelY)}px`;

                const e_c = 0.5 * state.mass * state.v * state.v;
                const e_p = state.totalEnergy - e_c;

                chart.data.datasets[0].data[0] = e_c;
                chart.data.datasets[1].data[0] = e_p;
                chart.options.scales.x.max = state.totalEnergy * 1.1;
                chart.update('none');

                animationFrameId = requestAnimationFrame(animate);
            }

            massSlider.addEventListener('input', updateValues);
            velSlider.addEventListener('input', updateValues);
            updateValues();
        };
        
        const setupPendulum = () => {
            const frictionSlider = document.getElementById('pendulumFriction');
            const frictionValue = document.getElementById('pendulumFrictionValue');
            const arm = document.getElementById('pendulum-arm');
            const bob = document.getElementById('pendulum-bob');
            const currentEnergyEl = document.getElementById('pendulumCurrentEnergy');
            
            const canvas = document.getElementById('pendulumChart');
            const ctx = canvas.getContext('2d');
            
            const armLength = arm.clientHeight;
            const bobSize = bob.clientWidth;
            
            let chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Energia'],
                    datasets: [
                        { label: 'Cinética', data: [0], backgroundColor: '#3498db', borderWidth: 1 },
                        { label: 'Potencial', data: [0], backgroundColor: '#27ae60', borderWidth: 1 },
                        { label: 'Dissipada', data: [0], backgroundColor: '#e74c3c', borderWidth: 1 },
                    ]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { stacked: true, title: { display: true, text: 'Joules (J)' } },
                        y: { stacked: true, display: false }
                    },
                    plugins: {
                        legend: { position: 'top' },
                         tooltip: { enabled: false }
                    }
                }
            });

            let state = {
                angle: Math.PI / 3,
                angularVelocity: 0,
                friction: 0.005,
                mass: 1,
                initialEnergy: 0,
            };
            
            state.initialEnergy = state.mass * g * armLength * (1 - Math.cos(state.angle));

            function updateFriction() {
                state.friction = parseFloat(frictionSlider.value);
                const frictionLevel = state.friction / 0.05;
                if (frictionLevel < 0.01) frictionValue.textContent = 'Nenhum';
                else if (frictionLevel < 0.33) frictionValue.textContent = 'Baixo';
                else if (frictionLevel < 0.66) frictionValue.textContent = 'Médio';
                else frictionValue.textContent = 'Alto';
            }

            function animatePendulum() {
                const angularAcceleration = -(g / armLength) * Math.sin(state.angle) - state.friction * state.angularVelocity;
                state.angularVelocity += angularAcceleration * 0.016;
                state.angle += state.angularVelocity * 0.016;

                arm.style.transform = `rotate(${state.angle}rad)`;
                
                const bobX = arm.parentElement.clientWidth / 2 + armLength * Math.sin(state.angle) - bobSize / 2;
                const bobY = armLength * Math.cos(state.angle) - bobSize / 2;
                bob.style.left = `${bobX}px`;
                bob.style.top = `${bobY}px`;
                
                const height = armLength * (1 - Math.cos(state.angle));
                const velocity = state.angularVelocity * armLength;
                const e_p = state.mass * g * height;
                const e_c = 0.5 * state.mass * velocity * velocity;
                const currentEnergy = e_p + e_c;
                const dissipatedEnergy = state.initialEnergy - currentEnergy;
                
                chart.data.datasets[0].data[0] = e_c;
                chart.data.datasets[1].data[0] = e_p;
                chart.data.datasets[2].data[0] = dissipatedEnergy > 0 ? dissipatedEnergy : 0;
                chart.options.scales.x.max = state.initialEnergy * 1.1;
                chart.update('none');
                
                currentEnergyEl.textContent = currentEnergy.toFixed(2);
                
                requestAnimationFrame(animatePendulum);
            }
            
            frictionSlider.addEventListener('input', updateFriction);
            updateFriction();
            animatePendulum();
        };

        const setupChallenges = () => {
            document.getElementById('calcVik').addEventListener('click', () => {
                const h = 20;
                const v = Math.sqrt(2 * g * h);
                document.getElementById('resVik').textContent = `v = ${v.toFixed(2)} m/s`;
            });
            document.getElementById('calcPed').addEventListener('click', () => {
                const h = 3;
                const v = Math.sqrt(2 * g * h);
                document.getElementById('resPed').textContent = `v = ${v.toFixed(2)} m/s`;
            });
            document.getElementById('calcLut').addEventListener('click', () => {
                const m = 100;
                const v = 5;
                const e_pe = 0.5 * m * v * v;
                document.getElementById('resLut').textContent = `E_pe = ${e_pe.toFixed(2)} J`;
            });
            document.getElementById('calcEsc').addEventListener('click', () => {
                const m = 50, h = 2, w_atrito = 600;
                const e_p_inicial = m * g * h;
                const e_c_final = e_p_inicial - w_atrito;
                if (e_c_final > 0) {
                    const v_final = Math.sqrt(2 * e_c_final / m);
                    document.getElementById('resEsc').textContent = `v = ${v_final.toFixed(2)} m/s`;
                } else {
                    document.getElementById('resEsc').textContent = 'Não chega ao final';
                }
            });
        };

        document.addEventListener('DOMContentLoaded', () => {
            setupProjectile();
            setupPendulum();
            setupChallenges();
        });
    </script>
</body>
</html>
